-- 간단한 직원 테이블 생성 (사번, 이름, 부서만)
-- 이 파일을 Supabase SQL Editor에서 실행하세요

-- 기존 employees 테이블이 있다면 삭제
DROP TABLE IF EXISTS employees CASCADE;

-- 간단한 직원 테이블 생성
CREATE TABLE employees (
    id SERIAL PRIMARY KEY,
    employee_id VARCHAR(20) NOT NULL UNIQUE,
    name VARCHAR(100) NOT NULL,
    department VARCHAR(100) NOT NULL,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT TIMEZONE('utc', NOW())
);

-- RLS 정책 설정
ALTER TABLE employees ENABLE ROW LEVEL SECURITY;

-- 모든 인증된 사용자가 조회 가능
CREATE POLICY "직원 정보 조회는 인증된 사용자 가능" ON employees
    FOR SELECT USING (auth.role() = 'authenticated');

-- 관리자만 수정/삭제 가능
CREATE POLICY "직원 정보 수정은 관리자만 가능" ON employees
    FOR ALL USING (
        EXISTS (SELECT 1 FROM profiles WHERE id = auth.uid() AND is_admin = TRUE)
    );

-- 기본 직원 데이터 삽입
INSERT INTO employees (employee_id, name, department) VALUES
('2', '김상균', '외국'),
('7', '서정에', '약지과'),
('163', '시정혜', '약지과'),
('202', '손복찬', '업무과'),
('267', '박두심', '임상병리실'),
('277', '송영대', '의약/물/고객관리'),
('450', '김용수', '방사선실'),
('539', '김정숙', '수술실'),
('549', '자제목', '원무'),
('628', '최선아', '심사'),
('799', '임복희', '외과'),
('873', '안영오', '외래'),
('939', '이진아', '진료협력센터'),
('1000', '민경배', '외래'),
('1131', '김정금', '방사선실'),
('1164', '김정숙', '통합진료실'),
('1187', '구성봉', '외국'),
('1200', '송기호', '외국'),
('1224', '정미진', '건강증진센터'),
('1237', '구선화', '건강증진센터'),
('1238', '조은영', '의약/물/고객관리'),
('1230', '김경아', '약제과'),
('1260', '국정부', '대외협력본부'),
('1263', '이은수', '임상병리실'),
('1286', '이화영', '5승상급'),
('1300', '이희정', '대외협력본부'),
('1310', '조은주', '건강증진센터'),
('1319', '이정희', '의약/물/고객관리'),
('1324', '박지혜', '원무'),
('1355', '서연신', '6승통합'),
('1380', '이현진', '의약/물/고객관리'),
('1401', '이영진', '통합진료실'),
('1406', '신지영', '내시경센터'),
('1417', '조경수', '5승통합'),
('1427', '장혜수', 'SEROUM'),
('1475', '김현아', '외국지원'),
('1494', '김희효', '외국'),
('1500', '김인혜', '5승상급'),
('1511', '윤학수', '의약/물/고객관리'),
('1530', '이혜진', '약제과'),
('1542', '유상화', '심사'),
('1562', '최영아', '6승통합'),
('1565', '조혜인', '임상병리실'),
('1572', '서수진', '업무과'),
('1589', '이소영', '임상병리실'),
('1592', '이수정', '6승통합'),
('1594', '김지은', '건강증진센터'),
('1596', '김금희', '외래'),
('1612', '최아영', '의약/물/고객관리'),
('1614', '홍영아', '6승통합'),
('1624', '김현진', '외국'),
('1629', '김주석', '대외협력본부'),
('1643', '임지경', '외국'),
('1648', '이영애', '시설관리'),
('1660', '배영은', '내시경센터'),
('1668', '김성우', '외국'),
('1671', '이미영', '5승상급'),
('1675', '이현심', '5승상급'),
('1689', '송영호', '시설관리'),
('1693', '김우선', '외국'),
('1701', '이정은', '건강증진센터'),
('1705', '최아름', '방사선실'),
('1717', '유혜진', '5승통합'),
('1719', '이보람', '5승통합'),
('1731', '이병주', '외국'),
('1732', '박진희', '외국'),
('1733', '정지영', '방사선실'),
('1735', '장한정', '수술실'),
('1738', '권효진', '외국'),
('1750', '박용주', 'SEROUM'),
('1754', '오유진', '5승상급'),
('1755', '김선아', '방사선실'),
('1758', '최소영', '6승통합'),
('1764', '이수진', '방사선실'),
('1765', '박지현', '수술실'),
('1768', '송영한', '6승통합'),
('1774', '김정모', '법인사무국'),
('1775', '김은지', '5승통합'),
('1778', '김희영', '방사선실'),
('1782', '김정희', '외국'),
('1783', '류지혜', '5승통합'),
('1785', '김영기', '대외협력본부'),
('1786', '최시은', '수술실'),
('1787', '한정림', '심사'),
('1789', '이정은', '방사선실'),
('1790', '김영희', '대외협력본부'),
('1792', '김채은', '6승통합'),
('1793', '박기석', '외국'),
('1794', '이보람', '외국'),
('1795', '김영남', '5승통합'),
('1797', '박진희', '5승통합'),
('1798', '김현아', '6승통합'),
('1799', '김가영', '6승통합'),
('1802', '이윤서', '6승통합'),
('1803', '김혜민', '내시경센터'),
('1804', '주용성', '수술실'),
('1805', '나정연', '5승통합'),
('1809', '김은정', '5승통합'),
('1812', '김경진', '5승상급'),
('1813', '오하영', 'SEROUM'),
('1815', '김정현', '5승통합'),
('1818', '이정수', '통합진료실'),
('1820', '송정아', '외국'),
('1821', '송유진', '외국'),
('1822', '손기락', '외국'),
('1823', '박정영', '외국'),
('1824', '송수진', '외국'),
('1825', '이세욱', '외국'),
('1826', '김지연', '5승통합'),
('1827', '이연수', '5승통합'),
('1828', '김국진', '외국지원'),
('1829', '류현선', 'SEROUM'),
('1831', '최정선', '방사선실'),
('1832', '최혜영', '업무과'),
('1833', '이은영', '5승통합'),
('1834', '이세희', '5승통합'),
('1835', '배기영', '5승통합'),
('1836', '김진희', '외국'),
('9337', '염재화', '시설관리'),
('9342', '이혜진', '외래'),
('9347', '이다겸', '임상병리실'),
('9364', '박신영', '내시경센터'),
('9367', '박지영', '외래'),
('9381', '김희진', '내시경센터'),
('9387', '김영관리실', '감염관리실'),
('9401', '신종수', '원무'),
('9403', '김혜진', '건강증진센터'),
('9404', '이태영', '업무과'),
('9406', '이지현', '업무과'),
('9408', '신지은', '방사선실'),
('9409', '채영수', '5승통합'),
('9410', '심정희', '6승통합'),
('9411', '이정희', '6승통합'),
('9417', '이정선', '업무과'),
('9419', '신혜리', '5승통합'),
('9423', '김영실', '원무'),
('9427', '이정아', '6승통합'),
('9428', '김미혜', '원무'),
('9429', '정세영', '5승통합'),
('9430', '김경민', '5승통합'),
('9432', '이연진', '건강증진센터'),
('9433', '김민서', '5승통합'),
('9436', '이정아', '6승통합'),
('9440', '최다연', '원무'),
('9448', '김나연', '건강증진센터'),
('9451', '박한지', '내시경센터'),
('9455', '차수진', '건강증진센터'),
('9456', '이정주', '업무과'),
('9458', '이정희', '외래'),
('9459', '박지선', '의약/물/고객관리'),
('9468', '박이슬', '방사선실'),
('9469', '김연제', '원무'),
('9473', '이희영', '6승통합'),
('9474', '김수진', '5승통합'),
('9475', '신효서', '6승통합'),
('9489', '박영숙', '5승통합'),
('9494', '주대교', '외국지원'),
('9495', '이효선', '의약/물/고객관리'),
('9496', '박정미', '원무'),
('9501', '최지선', '외래'),
('9503', '이종민', '건강증진센터'),
('9505', '김영아', '내시경센터'),
('9506', '박영아', '내시경센터'),
('9508', '김효순', '의약/물/고객관리'),
('9512', '김은진', '6승통합'),
('9513', '이정은', '심사'),
('9518', '이한아', '약제과'),
('9521', '유혜세', '내시경센터'),
('9523', '김창고', '마케팅'),
('9524', '이한별', '내시경센터'),
('9526', '이지연', '장애인스포츠단'),
('9527', '박상훈', '장애인스포츠단'),
('9528', '이정아', '장애인스포츠단'),
('9529', '김정현', '통합진료실'),
('9531', '김유진', '심사'),
('9533', '김영수', '의약/물/고객관리'),
('9537', '이선진', '외래'),
('9539', '이연지', '외래'),
('9540', '김정은', '건강증진센터'),
('9542', '한주연', '건강증진센터'),
('9550', '송혜진', '시설관리'),
('9551', '김정민', '시설관리'),
('9552', '이정훈', '내시경센터'),
('9553', '한규정', '업무과'),
('9560', '박수연', '내시경센터'),
('9561', '공인선', '방사선실'),
('9562', '정지선', '6승통합'),
('9563', '조수연', '외래'),
('9566', '이예림', '외래'),
('9568', '김지선', '마케팅'),
('9570', '박혜선', '방사선실'),
('9571', '김현지', '외래'),
('9572', '장영선', '내시경센터'),
('9573', '김효진', '내시경센터'),
('9575', '이혜란', '업무과'),
('9576', '주이식', '업무과'),
('9578', '공진선', '외래'),
('9579', '이정분', '의약/물/고객관리'),
('9580', '이정해', '신규검진센터'),
('9582', '유정해', '일반검진센터'),
('9584', '이혜진', '외래'),
('9585', '박지혜', '외래'),
('9586', '이정희', '내시경센터'),
('9587', '김은정', '5승상급'),
('9590', '정진선', '원무'),
('9591', '이정선', '심사'),
('9592', '박지은', '내시경센터'),
('9593', '김지영', '외래');
